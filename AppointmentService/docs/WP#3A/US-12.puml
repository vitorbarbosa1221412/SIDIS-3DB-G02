
'https://plantuml.com/sequence-diagram
@startuml US12_List_Appointments
title WP2A-12:As a Patient, I want to view my appointments.

actor User
participant "AppointmentController" as Controller
participant "AppointmentService" as Service
participant "AppointmentRepository" as Repository
participant "AppointmentMapper" as Mapper
database "Database"

User -> Controller : GET /appointments
activate Controller

Controller -> Service : listAppointments()
activate Service

Service -> Repository : findAll()
activate Repository

Repository -> Database : SELECT * FROM appointment
Database --> Repository : List<Appointment>
deactivate Database

Repository --> Service : List<Appointment>
deactivate Repository

Service --> Controller : List<Appointment>
deactivate Service

Controller -> Mapper : toView(List<Appointment>)
activate Mapper

Mapper --> Controller : List<AppointmentView>
deactivate Mapper

Controller --> User : 200 OK\nList<AppointmentView>
deactivate Controller
@enduml
