Compreendido. Para resolver o alargamento do diagrama e for√ßar uma disposi√ß√£o mais compacta e vertical, vou agrupar os componentes de forma mais agressiva e tentar orientar as rela√ß√µes de cima para baixo (Top-Down).

A chave √© minimizar as liga√ß√µes cruzadas horizontais e maximizar o aninhamento vertical.

Aqui est√° o c√≥digo PlantUML reestruturado para ser o mais vertical e conciso poss√≠vel:

-----

## üõ†Ô∏è Physician Service CQRS/Saga (Layout M√°ximo Vertical)

```plantuml
@startuml PhysicianServiceCQRS_MaxVertical

title Physician Service Internal Architecture (CQRS & Saga)

' Setup for vertical/compact layout
skinparam defaultTextAlignment center
skinparam databaseBackgroundColor #FFCC99
skinparam queueBackgroundColor #98FB98
skinparam rectangle {
    BackgroundColor White
    BorderColor #1D70B8
    FontColor Black
    StereotypeFontColor #1D70B8
    Shadowing true
    roundCorner 15
}
skinparam component {
    FontSize 14
    Padding 10
}

rectangle "Physician Service Bounded Context" as SVC_P <<Microservice x2>> {

    rectangle "API Interface" as API_LAYER {
        component "REST API" as API_CTRL <<HTTPS Controllers>>
    }

    rectangle "ASYNCHRONOUS LAYER" as ASYNC_LAYER {
        queue "RabbitMQ" as Broker <<AMQP Broker>>
    }
    
    ' ---- WRITE SIDE: ESCALA VERTICAL ----
    rectangle "WRITE SIDE (COMMAND & SAGA)" as WriteSide {
        component "1. Command Handler" as CmdHandler
        component "2. Domain Model" as DomainModel <<Aggregate Root: Schedule>>
        component "3. Event Publisher" as EventPublisher <<RabbitTemplate>>
        database "4. Write DB" as WriteDB <<PostgreSQL (ACID)>>
    }
    
    ' ---- READ SIDE: ESCALA VERTICAL ----
    rectangle "READ SIDE (QUERY)" as QuerySide {
        component "5. Query Service" as QueryService <<Optimized Read: Get Availability>>
        component "6. Projection Listener" as ProjectionListener <<Updates Read Model>>
        database "7. Read DB" as ReadDB <<PostgreSQL/MongoDB View>>
    }
    
    ' FLUXOS DE COMUNICA√á√ÉO (Agrupados Verticalmente)

    ' REST Command Flow
    API_CTRL -down-> CmdHandler : POST /reserve-slot
    
    ' SAGA CONSUMER Flow
    Broker -down-> CmdHandler : Consumes: AppointmentRequestedEvent 
    
    ' Write Core Flow
    CmdHandler -down-> DomainModel : Apply Reservation Logic
    DomainModel -down-> WriteDB : Persist Slot Reservation
    DomainModel -down-> EventPublisher : Publish Event
    EventPublisher -down-> Broker : Publishes: PhysicianSlotReservedEvent (Saga Step)

    ' REST Query Flow
    API_CTRL -down-> QueryService : GET /available-slots

    ' Read Core Flow
    QueryService -down-> ReadDB : Fetch Availability Projection

    ' CQRS Sync Flow
    Broker -down-> ProjectionListener : Consumes Domain Events
    ProjectionListener -down-> ReadDB : Updates Denormalized View

}

@enduml
```